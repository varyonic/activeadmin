head do
  meta :"http-equiv" => "Content-type", content: "text/html; charset=utf-8"
  active_admin_namespace.meta_tags.each do |name, content|
    meta name: name, content: content
  end
  title page_title

  active_admin_application.stylesheets.each do |style, options|
    text_node stylesheet_link_tag(style, options).html_safe
  end

  active_admin_application.javascripts.each do |path|
    text_node(javascript_include_tag(path))
  end

  if active_admin_namespace.favicon
    text_node(favicon_link_tag(active_admin_namespace.favicon))
  end

  text_node csrf_meta_tag
end
body(class: body_classes) do
  div id: "wrapper" do
    if active_admin_namespace.unsupported_browser_matcher =~ controller.request.user_agent
      unsupported_browser
    end
    header active_admin_namespace, current_menu
    title_bar page_title, action_items_for_action
    div class: 'flashes' do
      flash_messages.each do |type, message|
        div message, class: "flash flash_#{type}"
      end
    end
    div id: "active_admin_content", class: (skip_sidebar? ? "without_sidebar" : "with_sidebar") do
      div id: "main_content_wrapper" do
        div id: "main_content" do
          yield
        end
      end
      sidebar sidebar_sections_for_action, id: 'sidebar' unless sidebar_sections_for_action.empty? || assigns[:skip_sidebar] == true
    end
    footer active_admin_namespace
  end
end
